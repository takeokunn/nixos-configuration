{ username }: {
  services = {
    ntp.enable = true;
    ollama = {
      enable = true;
      acceleration = "rocm";
    };
    offlineimap.enable = true;
    openssh.enable = true;

    xserver = {
      enable = true;
      xkb.layout = "jp";
      displayManager.gdm.enable = true;
    };

    displayManager.autoLogin = {
      enable = true;
      user = username;
    };

    pipewire = {
      enable = true;
      alsa = {
        enable = true;
        support32Bit = true;
      };
      pulse.enable = true;
      jack.enable = true;
    };

    xremap = {
      userName = username;
      serviceMode = "system";
      config = {
        modmap = [{
          name = "CapsLock to Ctrl";
          remap = { CapsLock = "Ctrl_L"; };
        }];
      };
    };

    tlp = {
      enable = true;
      settings = {
        CPU_SCALING_GOVERNOR_ON_AC = "performance";
        CPU_SCALING_GOVERNOR_ON_BAT = "powersave";

        CPU_HWP_DYN_BOOST_ON_AC = 1;
        CPU_HWP_DYN_BOOST_ON_BAT = 0;

        CPU_BOOST_ON_AC = 1;
        CPU_BOOST_ON_BAT = 0;

        CPU_ENERGY_PERF_POLICY_ON_AC = "performance";
        CPU_ENERGY_PERF_POLICY_ON_BAT = "power";

        RUNTIME_PM_ON_AC = "auto";
        RUNTIME_PM_ON_BAT = "auto";

        PLATFORM_PROFILE_ON_AC = "performance";
        PLATFORM_PROFILE_ON_BAT = "low-power";

        SATA_LINKPWR_ON_AC = "max_performance";
        SATA_LINKPWR_ON_BAT = "min_power";

        SOUND_POWER_SAVE_ON_AC = 0;
        SOUND_POWER_SAVE_ON_BAT = 1;
      };
    };
  };
}
